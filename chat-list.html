<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat List</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-black dark:text-white min-h-screen p-6">

  <!-- Header with title and dark mode toggle -->
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-bold">Chats</h2>
    <button id="themeBtn" class="bg-gray-300 dark:bg-gray-700 px-3 py-2 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-600">Toggle Dark Mode</button>
  </div>

  <!-- Search bar -->
  <input type="text" id="search" placeholder="Search contacts..." class="p-2 border rounded w-full mb-4 dark:bg-gray-800 dark:text-white dark:border-gray-600">

  <!-- Add new contact -->
  <div class="flex mb-4">
    <input type="text" id="newContact" placeholder="Enter new contact name" class="flex-1 p-2 border rounded-l-lg dark:bg-gray-800 dark:text-white dark:border-gray-600">
    <button id="addContactBtn" class="bg-green-500 text-white px-4 rounded-r-lg hover:bg-green-600">Add</button>
  </div>

  <!-- Contact list -->
  <ul id="contactList" class="space-y-2">
    <!-- Contacts will be rendered here -->
  </ul>

  <!-- JS -->
  <script>
    // Dark/Light mode toggle
    const themeBtn = document.getElementById('themeBtn');
    themeBtn.addEventListener('click', () => {
      document.body.classList.toggle('dark');
    });

    // Load contacts from localStorage or default list
    let contacts = JSON.parse(localStorage.getItem('contacts')) || ['John Doe', 'Jane Smith', 'Alice', 'Bob'];
    const contactList = document.getElementById('contactList');

    // Function to render contacts
    function renderContacts() {
      contactList.innerHTML = '';
      contacts.forEach(name => {
        const li = document.createElement('li');
        li.className = 'flex items-center p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded cursor-pointer';
        li.innerHTML = `<span>${name}</span>`;
        li.addEventListener('click', () => {
          window.location.href = 'chat-screen.html?user=' + encodeURIComponent(name);
        });
        contactList.appendChild(li);
      });
    }

    // Initial render
    renderContacts();

    // Add new contact
    const addContactBtn = document.getElementById('addContactBtn');
    const newContactInput = document.getElementById('newContact');

    addContactBtn.addEventListener('click', () => {
      const name = newContactInput.value.trim();
      if(name && !contacts.includes(name)){
        contacts.push(name);
        localStorage.setItem('contacts', JSON.stringify(contacts));
        renderContacts();
        newContactInput.value = '';
      } else {
        alert('Please enter a valid name or contact already exists!');
      }
    });

    // Search contacts
    const searchInput = document.getElementById('search');
    searchInput.addEventListener('input', () => {
      const filter = searchInput.value.toLowerCase();
      document.querySelectorAll('#contactList li').forEach(li => {
        li.style.display = li.textContent.toLowerCase().includes(filter) ? '' : 'none';
      });
    });
  </script>
</body>
</html>
